{
    "spec": {
        "name": "MCSA240",
        "description": "MCSA-240 Blueprint",
        "resources": {
            "type": "USER",
            "service_definition_list": [
                {
                    "name": "RemoteDesktopVM",
                    "description": "Remote Desktop VM service",
                    "port_list": [],
                    "singleton": false,
                    "tier": "",
                    "depends_on_list": [],
                    "variable_list": [],
                    "action_list": [
                        {
                            "name": "action_create",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "RemoteDesktopVM___create___runbook",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "RemoteDesktopVM___create___dag"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "RemoteDesktopVM___create___dag",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": [
                                                {
                                                    "from_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "join domain"
                                                    },
                                                    "to_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "wait for domain"
                                                    }
                                                },
                                                {
                                                    "from_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "wait for domain"
                                                    },
                                                    "to_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "get owner username"
                                                    }
                                                }
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [
                                            {
                                                "kind": "app_task",
                                                "name": "join domain"
                                            },
                                            {
                                                "kind": "app_task",
                                                "name": "wait for domain"
                                            },
                                            {
                                                "kind": "app_task",
                                                "name": "get owner username"
                                            }
                                        ],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "join domain",
                                        "description": "",
                                        "type": "EXEC",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "script_type": "npsscript",
                                            "script": "# region headers\n# posh-api-template v20190604 / stephane.bourdeaud@nutanix.com\n#* author:       stephane.bourdeaud@nutanix.com\n#* version:      11/14/2019\n#  task_name:    JoinDomain\n#  description:  Joins the specified Active Directory domain\n# endregion\n\n#region capture Calm variables\n$ad_username = \"@@{DOMAIN_ADMIN.username}@@\"\n$ad_username_secret = \"@@{DOMAIN_ADMIN.secret}@@\"\n$ad_domain = \"@@{DOMAIN_NAME}@@\"\n#endregion\n\n#converting password to something we can use\n$adminpassword = ConvertTo-SecureString -asPlainText -Force -String \"$ad_username_secret\"\n#creating the credentials object based on the Calm variables\n$credential = New-Object System.Management.Automation.PSCredential($ad_username,$adminpassword)\n\n#joing the domain\ntry {\n    $result = add-computer -domainname $ad_domain -Credential ($credential) -Force -Options JoinWithNewName,AccountCreate -PassThru -ErrorAction Stop -Verbose\n    Write-Host \"INFO: Successfully joined Active Directory domain $ad_domain\"\n}\ncatch {Throw \"ERROR: Could not join Active Directory domain : $($_.Exception.Message)\"}",
                                            "login_credential_local_reference": {
                                                "kind": "app_credential",
                                                "name": "default"
                                            }
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "wait for domain",
                                        "description": "",
                                        "type": "DELAY",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "interval_secs": 60
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "get owner username",
                                        "description": "",
                                        "type": "SET_VARIABLE",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "script_type": "static",
                                            "script": "\nvm_index = '@@{calm_array_index}@@'\nif vm_index == '0':\n    print('OWNER={}'.format('husain@lab.demo'))\nelse:\n    print('OWNER={}'.format('husain@lab.demo'))\n",
                                            "eval_variables": [
                                                "O",
                                                "W",
                                                "N",
                                                "E",
                                                "R"
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_delete",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_RemoteDesktopVM_action_delete",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_RemoteDesktopVM_action_delete"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_RemoteDesktopVM_action_delete",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_start",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_RemoteDesktopVM_action_start",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_RemoteDesktopVM_action_start"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_RemoteDesktopVM_action_start",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_stop",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_RemoteDesktopVM_action_stop",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_RemoteDesktopVM_action_stop"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_RemoteDesktopVM_action_stop",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_restart",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_RemoteDesktopVM_action_restart",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_RemoteDesktopVM_action_restart"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_RemoteDesktopVM_action_restart",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        },
                        {
                            "name": "action_soft_delete",
                            "description": "",
                            "type": "system",
                            "critical": true,
                            "runbook": {
                                "name": "Runbook_for_Service_RemoteDesktopVM_action_soft_delete",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "DAG_Task_for_Service_RemoteDesktopVM_action_soft_delete"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "DAG_Task_for_Service_RemoteDesktopVM_action_soft_delete",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "RemoteDesktopVM"
                                        },
                                        "attrs": {
                                            "edges": []
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        }
                    ],
                    "container_spec": {}
                }
            ],
            "package_definition_list": [
                {
                    "name": "RemoteDesktopPackage",
                    "description": "Remote Desktop Package",
                    "type": "CUSTOM",
                    "options": {
                        "install_runbook": {
                            "name": "Runbook_for_Package_RemoteDesktopPackage_action_install",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_RemoteDesktopPackage_action_install"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_RemoteDesktopPackage_action_install",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "RemoteDesktopVM"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        },
                        "uninstall_runbook": {
                            "name": "Runbook_for_Package_RemoteDesktopPackage_action_uninstall",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_RemoteDesktopPackage_action_uninstall"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_RemoteDesktopPackage_action_uninstall",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "RemoteDesktopVM"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        }
                    },
                    "service_local_reference_list": [
                        {
                            "kind": "app_service",
                            "name": "RemoteDesktopVM"
                        }
                    ],
                    "variable_list": [],
                    "version": ""
                }
            ],
            "published_service_definition_list": [],
            "substrate_definition_list": [
                {
                    "name": "RemoteDesktopVMS",
                    "description": "Remote Desktop Substrate",
                    "type": "AHV_VM",
                    "os_type": "Windows",
                    "create_spec": {
                        "categories": {
                            "AppFamily": "DevOps"
                        },
                        "name": "@@{calm_application_name}@@-REMOTE-@@{calm_array_index}@@",
                        "resources": {
                            "num_sockets": 2,
                            "num_vcpus_per_socket": 1,
                            "memory_size_mib": 4096,
                            "boot_config": {
                                "boot_device": {
                                    "disk_address": {
                                        "adapter_type": "SCSI",
                                        "device_index": 0
                                    }
                                }
                            },
                            "disk_list": [
                                {
                                    "data_source_reference": {
                                        "kind": "image",
                                        "name": "windows-2016",
                                        "uuid": "466b612f-1c45-4510-9f2d-042ce925100b"
                                    },
                                    "device_properties": {
                                        "device_type": "DISK",
                                        "disk_address": {
                                            "adapter_type": "SCSI",
                                            "device_index": 0
                                        }
                                    },
                                    "disk_size_mib": 0
                                }
                            ],
                            "guest_customization": {
                                "sysprep": {
                                    "install_type": "PREPARED",
                                    "unattend_xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<unattend xmlns=\"urn:schemas-microsoft-com:unattend\">\n  <settings pass=\"specialize\">\n    <component name=\"Microsoft-Windows-TerminalServices-LocalSessionManager\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n      <fDenyTSConnections>false</fDenyTSConnections>\n    </component>\n    <component name=\"Microsoft-Windows-TerminalServices-RDP-WinStationExtensions\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" processorArchitecture=\"amd64\">\n      <UserAuthentication>0</UserAuthentication>\n    </component>\n    <component name=\"Microsoft-Windows-TCPIP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n      <Interfaces>\n        <Interface wcm:action=\"add\">\n            <Identifier>Ethernet 2</Identifier>\n            <Ipv4Settings>\n                <DhcpEnabled>false</DhcpEnabled>\n                <Metric>20</Metric>\n                <RouterDiscoveryEnabled>false</RouterDiscoveryEnabled>\n            </Ipv4Settings>\n            <UnicastIpAddresses>\n                <IpAddress wcm:action=\"add\" wcm:keyValue=\"1\">@@{LAB_IP_PREFIX}@@.@@{calm_array_index}@@.200/24</IpAddress>\n            </UnicastIpAddresses>\n        </Interface>\n      </Interfaces>\n    </component>\n    <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Networking-MPSSVC-Svc\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n      <FirewallGroups>\n        <FirewallGroup wcm:action=\"add\" wcm:keyValue=\"RemoteDesktop\">\n          <Active>true</Active>\n          <Profile>all</Profile>\n          <Group>@FirewallAPI.dll,-28752</Group>\n        </FirewallGroup>\n      </FirewallGroups>\n    </component>\n    <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n      <ComputerName>REMOTE-@@{calm_array_index}@@</ComputerName>\n      <RegisteredOrganization>Nutanix</RegisteredOrganization>\n      <RegisteredOwner>Acropolis</RegisteredOwner>\n      <TimeZone>UTC</TimeZone>\n    </component>\n  </settings>\n  <settings pass=\"oobeSystem\">\n    <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n      <UserAccounts>\n        <AdministratorPassword>\n          <Value>@@{LAB_DEFAULT.secret}@@</Value>\n          <PlainText>true</PlainText>\n        </AdministratorPassword>\n      </UserAccounts>\n      <AutoLogon>\n        <Password>\n          <Value>@@{LAB_DEFAULT.secret}@@</Value>\n          <PlainText>true</PlainText>\n        </Password>\n        <Enabled>true</Enabled>\n        <Username>Administrator</Username>\n      </AutoLogon>\n      <FirstLogonCommands>\n        <SynchronousCommand wcm:action=\"add\">\n          <CommandLine>cmd.exe /c netsh firewall add portopening TCP 5985 \"Port 5985\"</CommandLine>\n          <Description>Win RM port open</Description>\n          <Order>1</Order>\n          <RequiresUserInput>true</RequiresUserInput>\n        </SynchronousCommand>\n      </FirstLogonCommands>\n      <OOBE>\n        <HideEULAPage>true</HideEULAPage>\n        <SkipMachineOOBE>true</SkipMachineOOBE>\n      </OOBE>\n    </component>\n    <component xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" name=\"Microsoft-Windows-International-Core\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\">\n      <InputLocale>en-US</InputLocale>\n      <SystemLocale>en-US</SystemLocale>\n      <UILanguageFallback>en-us</UILanguageFallback>\n      <UILanguage>en-US</UILanguage>\n      <UserLocale>en-US</UserLocale>\n    </component>\n  </settings>\n</unattend>"
                                }
                            },
                            "nic_list": [
                                {
                                    "network_function_nic_type": "INGRESS",
                                    "nic_type": "NORMAL_NIC",
                                    "subnet_reference": {
                                        "kind": "subnet",
                                        "name": "@@{EXTERNAL_NETWORK.name}@@",
                                        "uuid": "@@{EXTERNAL_NETWORK.uuid}@@"
                                    }
                                },
                                {
                                    "network_function_nic_type": "INGRESS",
                                    "nic_type": "NORMAL_NIC",
                                    "subnet_reference": {
                                        "kind": "subnet",
                                        "name": "@@{LAB_NETWORK.name}@@",
                                        "uuid": "@@{LAB_NETWORK.uuid}@@"
                                    }
                                }
                            ]
                        }
                    },
                    "variable_list": [],
                    "action_list": [
                        {
                            "name": "pre_action_create",
                            "description": "",
                            "type": "fragment",
                            "critical": false,
                            "runbook": {
                                "name": "RemoteDesktopVMS___pre_create___runbook",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "RemoteDesktopVMS___pre_create___dag"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "RemoteDesktopVMS___pre_create___dag",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_substrate",
                                            "name": "RemoteDesktopVMS"
                                        },
                                        "attrs": {
                                            "edges": [
                                                {
                                                    "from_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "set lab network"
                                                    },
                                                    "to_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "get directory uuid"
                                                    }
                                                }
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [
                                            {
                                                "kind": "app_task",
                                                "name": "set lab network"
                                            },
                                            {
                                                "kind": "app_task",
                                                "name": "get directory uuid"
                                            }
                                        ],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "set lab network",
                                        "description": "",
                                        "type": "SET_VARIABLE",
                                        "target_any_local_reference": {
                                            "kind": "app_substrate",
                                            "name": "RemoteDesktopVMS"
                                        },
                                        "attrs": {
                                            "script_type": "static",
                                            "script": "\n\n# api call function\n# ================================================================\ndef http_request(api_endpoint, payload='', method='POST'):\n    jwt = '@@{calm_jwt}@@'\n    pc_address = '127.0.0.1'\n    pc_port = '9440'\n\n    url = \"https://{}:{}/api/nutanix/v3/{}\".format(\n        pc_address,\n        pc_port,\n        api_endpoint\n    )\n\n    headers = {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer {}'.format(jwt)\n    }\n\n    if len(payload) > 0:\n        payload = json.dumps(payload)\n\n    resp = urlreq(\n        url,\n        verb=method,\n        params=payload,\n        headers=headers,\n        verify=False\n    )\n\n    if resp.ok:\n        return json.loads(resp.content)\n    else:\n        print('Error in API call')\n        exit(1)\n\n\ncurrent_external_network = '@@{EXTERNAL_NETWORK}@@'\nif not current_external_network:\n    project_name = '@@{calm_project_name}@@'\n    result = http_request('projects/list', {'kind': 'project'})\n\n    network_list = []\n    default_network_uuid = None\n    for project in result['entities']:\n        if project['spec']['name'] == project_name:\n            network_list = project['spec']['resources']['subnet_reference_list']\n            default_network_uuid = project['spec']['resources']['default_subnet_reference']['uuid']\n\n    lab_network = {}\n    external_network = {}\n    for network in network_list:\n        if network['uuid'] == default_network_uuid:\n            lab_network = network\n        else:\n            external_network = network\n\n    print('LAB_NETWORK={}'.format(json.dumps(lab_network)))\n    print('EXTERNAL_NETWORK={}'.format(json.dumps(external_network)))\n",
                                            "eval_variables": [
                                                "LAB_NETWORK",
                                                "EXTERNAL_NETWORK"
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "get directory uuid",
                                        "description": "",
                                        "type": "SET_VARIABLE",
                                        "target_any_local_reference": {
                                            "kind": "app_substrate",
                                            "name": "RemoteDesktopVMS"
                                        },
                                        "attrs": {
                                            "script_type": "static",
                                            "script": "\n\n# api call function\n# ================================================================\ndef http_request(api_endpoint, payload='', method='POST'):\n    jwt = '@@{calm_jwt}@@'\n    pc_address = '127.0.0.1'\n    pc_port = '9440'\n\n    url = \"https://{}:{}/api/nutanix/v3/{}\".format(\n        pc_address,\n        pc_port,\n        api_endpoint\n    )\n\n    headers = {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer {}'.format(jwt)\n    }\n\n    if len(payload) > 0:\n        payload = json.dumps(payload)\n\n    resp = urlreq(\n        url,\n        verb=method,\n        params=payload,\n        headers=headers,\n        verify=False\n    )\n\n    if resp.ok:\n        return json.loads(resp.content)\n    else:\n        print('Error in API call')\n        exit(1)\n\n\ndef get_directory_uuid(domain_name):\n    api_endpoint = 'directory_services/list'\n    payload = {'filter': '', 'kind': 'directory_service'}\n    dirs = http_request(api_endpoint, payload)\n    for item in dirs['entities']:\n        if item['spec']['resources']['domain_name'] == domain_name:\n            return item['metadata']['uuid']\n\n    return None\n\n\ncurrent_directory_uuid = '@@{DIRECTORY_UUID}@@'\nif not current_directory_uuid:\n    print('DIRECTORY_UUID={}'.format(get_directory_uuid('@@{DOMAIN_NAME}@@')))\n",
                                            "eval_variables": [
                                                "DIRECTORY_UUID"
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        }
                    ],
                    "readiness_probe": {
                        "connection_type": "SSH",
                        "connection_port": 22,
                        "connection_protocol": "",
                        "timeout_secs": "",
                        "delay_secs": "60",
                        "retries": "5",
                        "address": "@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@",
                        "disable_readiness_probe": true
                    },
                    "editables": {}
                }
            ],
            "credential_definition_list": [
                {
                    "name": "default",
                    "description": "",
                    "type": "PASSWORD",
                    "username": "administrator",
                    "secret": {
                        "attrs": {
                            "is_secret_modified": true
                        },
                        "value": "nutanix/4u"
                    },
                    "default": true
                },
                {
                    "name": "default",
                    "description": "",
                    "type": "PASSWORD",
                    "username": "administrator@tlab.demo",
                    "secret": {
                        "attrs": {
                            "is_secret_modified": true
                        },
                        "value": "nx2Tech911!"
                    },
                    "default": false
                }
            ],
            "app_profile_list": [
                {
                    "name": "AHV",
                    "deployment_create_list": [
                        {
                            "published_service_local_reference_list": [],
                            "package_local_reference_list": [
                                {
                                    "kind": "app_package",
                                    "name": "RemoteDesktopPackage"
                                }
                            ],
                            "substrate_local_reference": {
                                "kind": "app_substrate",
                                "name": "RemoteDesktopVMS"
                            },
                            "depends_on_list": [],
                            "min_replicas": "@@{COUNT}@@",
                            "max_replicas": "1",
                            "type": "GREENFIELD",
                            "name": "RemoteDesktopDeployment",
                            "options": {}
                        }
                    ],
                    "variable_list": [
                        {
                            "name": "LAB_IP_PREFIX",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "192.168",
                            "data_type": "BASE",
                            "editables": {
                                "value": true
                            },
                            "is_hidden": false,
                            "is_mandatory": false
                        },
                        {
                            "name": "DOMAIN_NAME",
                            "description": "",
                            "type": "LOCAL",
                            "label": "University Domain",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "lab.demo",
                            "data_type": "BASE",
                            "editables": {
                                "value": true
                            },
                            "is_hidden": false,
                            "is_mandatory": false
                        },
                        {
                            "name": "DNS_SERVERS",
                            "description": "",
                            "type": "LOCAL",
                            "label": "Domain DNS",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "10.38.14.14",
                            "data_type": "BASE",
                            "editables": {
                                "value": true
                            },
                            "is_hidden": false,
                            "is_mandatory": false
                        },
                        {
                            "name": "LIST",
                            "description": "",
                            "type": "LOCAL",
                            "label": "Students List",
                            "attrs": {},
                            "val_type": "MULTILINE_STRING",
                            "value": "",
                            "data_type": "BASE",
                            "editables": {
                                "value": true
                            },
                            "is_hidden": false,
                            "is_mandatory": false
                        },
                        {
                            "name": "COUNT",
                            "description": "",
                            "type": "LOCAL",
                            "label": "Lab Seat Count",
                            "attrs": {},
                            "val_type": "INT",
                            "value": "1",
                            "data_type": "BASE",
                            "editables": {
                                "value": true
                            },
                            "regex": {
                                "value": "^[\\d]*$",
                                "should_validate": false
                            },
                            "options": {
                                "type": "PREDEFINED",
                                "choices": [
                                    "1",
                                    "2",
                                    "3",
                                    "4",
                                    "5",
                                    "6",
                                    "7",
                                    "8",
                                    "9",
                                    "10",
                                    "11",
                                    "12",
                                    "13",
                                    "14",
                                    "15",
                                    "16",
                                    "17",
                                    "18",
                                    "19",
                                    "20"
                                ]
                            },
                            "is_hidden": false,
                            "is_mandatory": false
                        },
                        {
                            "name": "EXTERNAL_NETWORK",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "",
                            "data_type": "BASE",
                            "is_hidden": true,
                            "is_mandatory": false
                        },
                        {
                            "name": "LAB_NETWORK",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "",
                            "data_type": "BASE",
                            "is_hidden": true,
                            "is_mandatory": false
                        },
                        {
                            "name": "DIRECTORY_UUID",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "",
                            "data_type": "BASE",
                            "is_hidden": true,
                            "is_mandatory": false
                        }
                    ],
                    "action_list": []
                }
            ],
            "client_attrs": {}
        }
    },
    "api_version": "3.0",
    "metadata": {
        "spec_version": 1,
        "kind": "blueprint",
        "name": "MCSA240",
        "project_reference": {
            "type": "project",
            "uuid": "a11946d9-fce6-4e39-ab46-0b4ec71ac4a6",
            "name": "default"
        }
    }
}
